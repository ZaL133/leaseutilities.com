<!doctype html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1P0LS9THPG"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-1P0LS9THPG');
    </script>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <!-- Bootstrap Icon library -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" integrity="sha384-He3RckdFB2wffiHOcESa3sf4Ida+ni/fw9SSzAcfY2EPnU1zkK/sLUzw2C5Tyuhj" crossorigin="anonymous">

    <!-- Site css -->
    <link rel="stylesheet" href="/content/css/site.css" rel="stylesheet" />

    <title>Lease Utilities | mileage projection</title>

    <meta name="description" content="Maximize your leased vehicle's potential with our user-friendly mileage calculator. Our tool effortlessly estimates your average daily and projected annual mileage, ensuring you stay within your lease terms. Ideal for personal and business leased cars, our calculator takes the guesswork out of mileage tracking. Simply input your start date and current odometer reading, and let our accurate and efficient tool do the rest. Stay informed, avoid excess mileage fees, and optimize your lease with our comprehensive mileage calculator.">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/content/img/2639905_car_icon.png">
  </head>
  <body>

    <!-- Header -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="/">Lease Utilities</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="/index.html">Mileage Projector</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" aria-current="page" href="/payment-calculator.html">Payment Calculator</a>
            </li>
        </ul>
        </div>
      </div>
    </nav>

    <!-- Content -->
    <div class="container my-5">
      <div class="row">
        <div class="col">
            <form>

                <h1>Mileage projector</h1>

                <p>Maximize your leased vehicle's potential with our user-friendly mileage calculator. Our tool effortlessly estimates your average daily and projected annual mileage</p>

                <!-- Miles -->
                <div class="mb-3">
                    <label for="miles" class="form-label">How many miles are currently on the Vehicle?</label>
                    <input type="email" class="form-control" id="miles" aria-describedby="milesHelp">
                </div>

                <!-- Lease Start Date -->
                <div class="mb-3">
                    <label for="startDate" class="form-label">What date did the lease start?</label>
                    <input type="date" class="form-control" id="startDate" aria-describedby="startDateHelp" />
                </div>

                <div class="row">
                  <!-- Daily Average Miles -->
                  <div class="mb-3 col-md-4 col-sm-12">
                    <label for="dailyAverageMiles" class="form-label">Daily average miles?</label>
                    <input type="number" class="form-control" id="dailyAverageMiles" aria-describedby="dailyAverageMilesHelp" disabled>
                  </div>

                  <!-- Projected Annual Miles-->
                  <div class="mb-3 col-md-4">
                    <label for="projectedAnnualMiles" class="form-label">Projected annual miles?</label>
                    <input type="number" class="form-control" id="projectedAnnualMiles" aria-describedby="projectedAnnualMilesHelp" disabled>
                    <div id="projectedAnnualMilesHelp" class="form-text">This is based on the avg daily miles driven <b>*</b> days of year</div>
                  </div>
                </div>

                <div class="row">
                  
                  <!-- Annual Miles -->
                  <div class="mb-3 col-md-4 col-sm-12">
                    <label for="annualAllowedMiles" class="form-label">Annual allowed miles</label>
                    <input type="number" class="form-control" id="annualAllowedMiles">
                  </div>

                  <!-- Over? -->
                  <div class="mb-3 col-md-4">
                    <label for="projectedOverage" class="form-label">Overage?</label>
                    <input type="number" class="form-control" id="projectedOverage" aria-describedby="projectedOverageMilesHelp" disabled>
                    <div id="projectedOverageHelp" class="form-text">(Annual allowed - Projected annual)</div>
                  </div>

                  <!-- Info -->
                  <div class="mb-3 col-md-4">
                    <label for="moreInfo" class="form-label">More Info</label>
                    <div class="form-control" id="moreInfo" disabled></div>
                  </div>
                </div>

                
                <button type="submit" class="btn btn-primary" id="submit">Submit</button>
            </form> 
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="container">
      <footer class="py-3 my-4">
        <ul class="nav justify-content-center border-bottom pb-3 mb-3">
          <li class="nav-item"><a href="/privacy.html" class="nav-link px-2 text-body-secondary">Privacy</a></li>
          <li class="nav-item"><a href="/about.html" class="nav-link px-2 text-body-secondary">About</a></li>
        </ul>
        <p class="text-center text-body-secondary">Â© 2024 leaseutilities.com</p>
      </footer>
    </div>

    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.slim.js" integrity="sha256-UgvvN8vBkgO0luPSUl2s8TIlOSYRoGFAX4jlCIm9Adc=" crossorigin="anonymous"></script>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <!-- Moment -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js"></script>

    <!-- Site js -->
    <script src="/content/js/site.js"></script>

    <script>
        $(function() {

          // Miles 
          let miles = lutil.getItem(lutil.consts.MILEAGEKEY);
          if (miles) $("#miles").val(miles);

          // Start Date
          let startDate = lutil.getItem(lutil.consts.STARTDATEKEY);
          if (startDate) $("#startDate").val(moment(startDate).format("yyyy-MM-DD"));

          // Annual Allowed Miles
          let annualMiles = lutil.getItem(lutil.consts.ANNUALMILESKEY);
          if (annualMiles) $("#annualAllowedMiles").val(annualMiles);


            $("#submit").click((e) => {
                e.preventDefault();

                // Miles
                var miles = $("#miles").val();
                if (miles) lutil.setItem(lutil.consts.MILEAGEKEY, miles);

                // Start Date 
                var startDate = moment($("#startDate").val());
                if (startDate) lutil.setItem(lutil.consts.STARTDATEKEY, startDate);

                // Annual Allowed Miles
                var annualAllowedMiles = $("#annualAllowedMiles").val();
                if (annualAllowedMiles) lutil.setItem(lutil.consts.ANNUALMILESKEY, annualAllowedMiles);

                var today = moment();
                var days  = today.diff(startDate, 'days');

                lutil.logMileage({ 
                    logDate : today.format("yyyy-MM-DD"),
                    miles   : miles
                });

                // Do all calculations here
                var dailyAverageMiles = miles / days;
                var projectedAnnualMiles = dailyAverageMiles * 365;

                if (annualAllowedMiles) {

                  // Calculate the avg you'll need to drive to hit your target 
                  var dailyAverageAtTarget  = (annualAllowedMiles / 365).toFixed(2);
                  var daysLeftInCurrentYear = 365 - days;
                  var milesLeft             = annualAllowedMiles - miles;
                  var averageToHitTarget    = milesLeft / daysLeftInCurrentYear;
                  var moreInfoText = `There are <span class='highlight'>${daysLeftInCurrentYear}</span> left in the current year.
At this rate, you will need to average <span class='highlight'>${averageToHitTarget.toFixed(1)}</span> miles per day to hit your allowed miles target.
`;
                  $("#moreInfo").html(moreInfoText);

                  // Calculations 
                  var projectedOverage = projectedAnnualMiles - annualAllowedMiles;
                  
                  if (projectedOverage > 0) {
                    $("#projectedOverage").val(projectedOverage.toFixed(1));
                  }
                }

                $("#dailyAverageMiles").val(dailyAverageMiles.toFixed(1));
                $("#projectedAnnualMiles").val(parseInt(projectedAnnualMiles.toFixed(1)));
            })
        })
    </script>
  </body>
</html>