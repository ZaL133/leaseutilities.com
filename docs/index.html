<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!-- Bootstrap Icon library -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" integrity="sha384-He3RckdFB2wffiHOcESa3sf4Ida+ni/fw9SSzAcfY2EPnU1zkK/sLUzw2C5Tyuhj" crossorigin="anonymous">

    <!-- Site css -->
    <link rel="stylesheet" href="/content/css/site.css" rel="stylesheet" />

    <title>Lease Utilities | mileage projection</title>

    <meta name="description" content="Maximize your leased vehicle's potential with our user-friendly mileage calculator. Our tool effortlessly estimates your average daily and projected annual mileage, ensuring you stay within your lease terms. Ideal for personal and business leased cars, our calculator takes the guesswork out of mileage tracking. Simply input your start date and current odometer reading, and let our accurate and efficient tool do the rest. Stay informed, avoid excess mileage fees, and optimize your lease with our comprehensive mileage calculator.">

  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col">
            <form>

                <h1>Mileage projector</h1>

                <p>Maximize your leased vehicle's potential with our user-friendly mileage calculator. Our tool effortlessly estimates your average daily and projected annual mileage, ensuring you stay within your lease terms. Ideal for personal and business leased cars, our calculator takes the guesswork out of mileage tracking. Simply input your start date and current odometer reading, and let our accurate and efficient tool do the rest.</p>

                <div class="mb-3">
                    <label for="miles" class="form-label">How many miles are currently on the Jeep?</label>
                    <input type="email" class="form-control" id="miles" aria-describedby="milesHelp">
                    <div id="milesHelp" class="form-text">We'll never share your email with anyone else.</div>
                </div>

                <div class="mb-3">
                    <label for="startDate" class="form-label">What date did the lease start?</label>
                    <input type="date" class="form-control" id="startDate" aria-describedby="startDateHelp" />
                    <div id="startDateHelp" class="form-text">Date of inception</div>
                </div>


                <div class="row">
                    <div class="mb-3 col-6">
                        <label for="dailyAverageMiles" class="form-label">Daily average miles?</label>
                        <input type="number" class="form-control" id="dailyAverageMiles" aria-describedby="dailyAverageMilesHelp" disabled>
                    </div>

                    <div class="mb-3 col-6">
                        <label for="projectedAnnualMiles" class="form-label">Projected annual miles?</label>
                        <input type="number" class="form-control" id="projectedAnnualMiles" aria-describedby="projectedAnnualMilesHelp" disabled>
                        <div id="projectedAnnualMilesHelp" class="form-text">This is based on the avg daily miles driven <b>*</b> days of year</div>
                    </div>

                </div>
                <button type="submit" class="btn btn-primary" id="submit">Submit</button>
            </form> 
        </div>
      </div>
    </div>

    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.slim.js" integrity="sha256-UgvvN8vBkgO0luPSUl2s8TIlOSYRoGFAX4jlCIm9Adc=" crossorigin="anonymous"></script>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <!-- Moment -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js"></script>

    <!-- Site js -->
    <script src="/content/js/site.js"></script>

    <script>
        $(function() {

          // init 
          let miles = lutil.getItem(lutil.consts.MILEAGEKEY);
          if (miles) $("#miles").val(miles);

          let startDate = lutil.getItem(lutil.consts.STARTDATEKEY);
          if (startDate) $("#startDate").val(moment(startDate).format("yyyy-MM-DD"));


            $("#submit").click((e) => {
                e.preventDefault();

                var miles = $("#miles").val();
                if (miles) lutil.setItem(lutil.consts.MILEAGEKEY, miles);
                var startDate = moment($("#startDate").val());
                if (startDate) lutil.setItem(lutil.consts.STARTDATEKEY, startDate);

                var today = moment();
                var days = today.diff(startDate, 'days');

                var dailyAverageMiles = miles / days;
                var projectedAnnualMiles = dailyAverageMiles * 365;

                $("#dailyAverageMiles").val(dailyAverageMiles);
                $("#projectedAnnualMiles").val(parseInt(projectedAnnualMiles));
            })
        })
    </script>
  </body>
</html>